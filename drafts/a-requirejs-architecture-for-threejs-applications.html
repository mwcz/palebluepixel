<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>    A RequireJS Architecture for ThreeJS Applications - Pale Blue Pixel
</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#171717">
    <link rel="icon" type="image/png" href="/static/images/favicon.png">


        <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="A RequireJS Architecture for ThreeJS Applications"/>
            <meta property="og:url" content="https://palebluepixel.org/drafts/a-requirejs-architecture-for-threejs-applications.html"/>
            <meta property="og:description" content="While working on DiMo, I found myself at the ThreeJS examples page quite often, searching for working examples. <script id …"/>


    <!--[if gte IE 9]
    <style type="text/css">
        .gradient {
            filter: none;
        }
    </style>
    <![endif]-->

    <!-- <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'> -->
    <link href="https://palebluepixel.org/theme/css/styles.min.css" rel="stylesheet">

    <!-- JavaScript plugins (requires jQuery) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
    <script>window.jQuery = $;</script>

    <link href="https://palebluepixel.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
          title="Pale Blue Pixel ATOM Feed"/>
    <link href="https://palebluepixel.org/feeds/rss.xml" type="application/atom+xml" rel="alternate"
          title="Pale Blue Pixel RSS Feed"/>


</head>
<body>
<div class="container">
    <nav class="pbp-navbar" role="navigation">
        <a href="https://palebluepixel.org" title="Pale Blue Pixel homepage" id="pbp-logo">
            PALE BL<span class="pbp-dot">&middot;</span>UE PIXEL
        </a>
        <ul class="pbp-navitems">
            <li class="pbp-navitem">
                <a href="/projects" class="pbp-navlink">Projects</a>
            </li>
            <li class="pbp-navitem">
                <a href="/posts" class="pbp-navlink">Blog</a>
            </li>
        </ul>
    </nav>
</div>
<!-- /.navbar -->
<main role="main" class="container">
    <article>


        <header class="page-header">
            <h1>
                A RequireJS Architecture for ThreeJS Applications
            </h1>
        </header>
        <div class="entry-content">
            <nav class="toc"></nav>
            <p>While working on <a href="/projects/dimo">DiMo</a>, I found myself at the <a href="http://threejs.org/examples/">ThreeJS
examples</a> page quite often, searching for working examples.</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;script</span> <span class="na">id=</span><span class="s">&quot;vertexShader&quot;</span> <span class="na">type=</span><span class="s">&quot;x-shader/x-vertex&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- dozens of lines of vertex shader (GLSL) code --&gt;</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;script</span> <span class="na">id=</span><span class="s">&quot;fragmentShader&quot;</span> <span class="na">type=</span><span class="s">&quot;x-shader/x-fragment&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- dozens of lines of fragment shader (GLSL) code --&gt;</span>
<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;script&gt;</span>
    <span class="c">&lt;!-- hundreds of lines of ThreeJS code --&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>


<p>I do believe that's the best way to distribute <em>demos</em>.  Sometimes sloppier
something looks, the more people will hack on it, and I mean that in the
kindest possible way.  Hackiness begets hackers.</p>
<pre style="line-height: 1.2"><code style="line-height: 1"><!--
-->src
├── index.html
├── js
│   ├── camera.js
│   ├── config.js
│   ├── config-panel.js
│   ├── gravity.js
│   ├── main.js
│   ├── mouse.js
│   ├── origin.js
│   ├── particle_colors.js
│   ├── particles.js
│   ├── player_colors.js
│   ├── players.js
│   ├── presets.js
│   ├── require.config.js
│   ├── scene.js
│   ├── timer.js
│   └── viewport.js
├── shaders
│   ├── particle.frag
│   ├── player.frag
│   └── vertex.vert
└── lib
    └── libraries like threejs, datgui, et al
</code></pre>

<p>I have absolutely no experience architecting 3D applications, so the actual
separations of concern are probably quite misguided!  However, even if
misguided, it proved to be much easier to work with than a single monolithic
script file.</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;content-type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=UTF-8&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;title&gt;</span>Geekspark DiMo<span class="nt">&lt;/title&gt;</span>

<span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot;css/app.min.css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;script</span> <span class="na">data-main=</span><span class="s">&quot;js/require.config&quot;</span> <span class="na">src=</span><span class="s">&quot;lib/requirejs/require.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>


<script>
$('pre code').each(add_prism_js);
function add_prism_js(i, el) {
    $(el).addClass('language-markup');
}
</script>
        </div>

        <!-- /.entry-content -->

        <footer class="pbp-article-footer">
            <small>
                This article was published on
                <time datetime="2014-09-20" pubdate="">2014-09-20</time>
                by <a href="https://twitter.com/mwcz" title="mwcz twitter" rel="author">mwcz</a>
                and tagged with
                    <a href="https://palebluepixel.org/tag/programming" rel="category">programming</a>,                    <a href="https://palebluepixel.org/tag/javascript" rel="category">javascript</a>,                    <a href="https://palebluepixel.org/tag/requirejs" rel="category">requirejs</a>,                    <a href="https://palebluepixel.org/tag/amd" rel="category">amd</a>,                    <a href="https://palebluepixel.org/tag/threejs" rel="category">threejs</a>,                    <a href="https://palebluepixel.org/tag/webgl" rel="category">webgl</a>,                    <a href="https://palebluepixel.org/tag/3d" rel="category">3d</a>, and                    <a href="https://palebluepixel.org/tag/web" rel="category">web</a>.
            </small>
        </footer>



    <script src="https://apis.google.com/js/plusone.js">
    </script>
    <div class="g-comments"
        data-href="https://palebluepixel.org/drafts/a-requirejs-architecture-for-threejs-applications.html"
        data-width="642"
        data-first_party_property="BLOGGER"
        data-view_type="FILTERED_POSTMOD">
    </div>


    </article>

</main>


<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://palebluepixel.org/theme/js/bootstrap.min.js"></script>
<script src="https://palebluepixel.org/theme/lib/prism/prism.js"></script>

</body>
</html>