{% extends "index.html" %}

{% block content %}

{% import 'includes/glass-card.html' as card %}

<section id="fireflies-container">
    {# hold the space open for the canvas to occupy; prevents jank #}
    <canvas id="fireflies-canvas" class="pbp-fullwidth"></canvas>
</section>

<section class="homepage">


    {#
    <h2>Top posts</h2>

    <div class="pinned-grid">
        {% for article in (articles_page.object_list if articles_page else articles) %}
            {% if article.pin %}
                {{ card.write(
                    title = article.title,
                    href = article.url,
                    background = article.image,
                    background_align = article.cardbgalign,
                ) }}
            {% endif %}
        {% endfor %}
    </div>

    <h2>Recent blog posts</h2>
    #}

    <div id="homepage-about band">
        <h2>Welcome</h2>
        <p>
            Programming posts and projects by Michael Clayton, <a href="https://redhat.com">Red Hat</a> software engineer and <a href="http://scripta.co">Scripta Games</a> co-founder.
        </p>
    </div>

    <div class="band">
        <h2>Featured projects</h2>

        <div class="latest-grid">
            {% for article in (articles_page.object_list if articles_page else articles) if article.category == 'Projects' and article.pin %}
                {% if loop.index <= 4 %}
                    {{ card.write(
                        title = article.title,
                        href = article.url,
                        background = article.image,
                        background_align = article.cardbgalign,
                    ) }}
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="band">
        <h2>Recent blog posts</h2>

        <div class="latest-grid">
            {% for article in (articles_page.object_list if articles_page else articles) if article.category == 'Posts' %}
                {% if loop.index <= 4 %}
                    {{ card.write(
                        title = article.title,
                        href = article.url,
                        background = article.image,
                        background_align = article.cardbgalign,
                    ) }}
                {% endif %}
            {% endfor %}
        </div>
    </div>

</section>

<script src="/static/js/homepage-fireflies/js/bundle.min.js"></script>

{% endblock content %}
