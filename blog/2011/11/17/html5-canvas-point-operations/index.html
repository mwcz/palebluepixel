<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>HTML5 canvas point operations</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/static/css/syntax.css">

    <link rel="stylesheet" type='text/css' href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" type='text/css' href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.js" type="application/javascript" charset="utf-8"></script>

    <!-- Custom CSS -->
    <style type="text/css" media="screen">
        body { font-family: 'Lato', sans-serif; }
        @media (min-width: 768px) {
            .container {
                max-width: 930px;
            }
        }
        .header {
            text-shadow: 0px 1px 2px rgba(0,0,0,0.1);
        }
        .header .nav-pills .glyphicon {
            position : relative;
            top      : 2px;
            left     : -2px;
            color    : black;
        }
        .clayto-photo-list img {
            width: 100%;
        }
        .clayto-project-list img {
            margin: 0 auto;
        }
    </style>

</head>
<body>

    <div class="container">
        <div class="header">
            <ul class="nav nav-pills pull-right">
                <li>
                    <a href="/">
                        <span class="glyphicon glyphicon-globe"></span>
                        Home
                    </a>
                </li>
                <li>
                    <a href="/blog">
                        <span class="glyphicon glyphicon-floppy-disk"></span>
                        Tech
                    </a>
                </li>
                <li>
                    <a href="/photos">
                        <span class="glyphicon glyphicon-camera"></span>
                        Photos
                    </a>
                </li>
                <li>
                    <a href="/about">
                        <span class="glyphicon glyphicon-barcode"></span>
                        About
                    </a>
                </li>
            </ul>
            <h1 class="text-muted">clayto.com</h1>
        </div>
        <div class="row">
            <div class="col-md-12">
                <h2>HTML5 canvas point operations</h2>
<p>17 Nov 2011</p>

<div>
<p>This is the last demo I made using <a href="https://github.com/mwcz/jsimage">JSImage</a>.  I created it some time around 2009-2010.  At the time, I had checked out an <a href="http://www.amazon.com/Digital-Image-Processing-Algorithmic-Introduction/dp/1846283795">imaging book</a> from my university&#39;s library at least ten times.  Most of the exercises in that book I implemented in Python using <a href="http://www.pythonware.com/products/pil/">PIL</a>, but point operations were simple enough to port to JavaScript quickly.</p>

<p>Point operations are image alterations that affect all pixels equally.  Other operations, like blurring for example, each result pixel depends on adjacent pixels.</p>

<p>This demonstrates changing contrast, value, saturation, hue, color inversion, and threshold point operations.  Note that there is a bug with increasing value and increasing saturation which I never got around to fixing.</p>

<script type="text/javascript" src="/static/js/005/jquery.min.js"></script> 

<script type="text/javascript" src="/static/js/005/jsimage.js"></script> 

<script type="text/javascript" src="/static/js/005/colorspace.js"></script> 

<script type="text/javascript"> 
           
    var IJS_PointOps; // make IJS_PointOps public so I can play with it in firebug more easily
    $(document).ready( function() {

        IJS_PointOps = new JSImage( "IJS_PointOps", "/static/images/005/bee.jpg" );
    });

</script> 

<p><canvas id="IJS_PointOps">your browser does not support canvas</canvas> </p>

<style type="text/css">
#canvas-point-ops-tools-table input {
    width: 20px;
    height: 24px;
}
</style>
 

<table cellpadding="4" cellspacing="0" id="canvas-point-ops-tools-table"> 
<tr> 
    <th>Value</th> 
    <th>Contrast</th> 
    <th>Saturation</th> 
    <th>Hue</th> 
    <th>Invert</th> 
    <th>Threshold</th> 
</tr> 

<tr> 
    <td> 
        <!-- using onmousedown instead of onclick because it improves perceived performance.
             definitely an accessibility problem, though --> 
        <input type="image" src="/static/images/005/arrow_up.png" onmousedown="IJS_PointOps.value( IJS_PointOps.canvas, 10 )" /> 
        <input type="image" src="/static/images/005/arrow_down.png" onmousedown="IJS_PointOps.value( IJS_PointOps.canvas, -10 )" /> 
    </td> 
    <td> 
        <input type="image" src="/static/images/005/arrow_up.png" onmousedown="IJS_PointOps.contrast( IJS_PointOps.canvas, 1.1)" /> 
        <input type="image" src="/static/images/005/arrow_down.png" onmousedown="IJS_PointOps.contrast( IJS_PointOps.canvas, 0.9)" /> 
    </td> 
    <td> 
        <input type="image" src="/static/images/005/arrow_up.png" onmousedown="IJS_PointOps.saturation( IJS_PointOps.canvas, 25 )" /> 
        <input type="image" src="/static/images/005/arrow_down.png" onmousedown="IJS_PointOps.saturation( IJS_PointOps.canvas, -25 )" /> 
    </td> 
    <td> 
        <input type="image" src="/static/images/005/arrow_up.png" onmousedown="IJS_PointOps.hue( IJS_PointOps.canvas, 20)" /> 
        <input type="image" src="/static/images/005/arrow_down.png" onmousedown="IJS_PointOps.hue( IJS_PointOps.canvas, -20)" /> 
    </td> 
    <td> 
        <button type="button" onmousedown="IJS_PointOps.invert()">invert</button> 
    </td> 
    <td> 
        <button type="button" onmousedown="IJS_PointOps.threshold( IJS_PointOps.canvas, document.getElementById('t').value )">threshold</button> 
        <br /> 
        <input type="text" value="127" maxlength="3" size="3" id="t" /> 
    </td> 
</tr> 

</table> 

</div>

            </div>
        </div>
        <div class="footer text-center">
            <hr />
            <!-- I <3 -->
            <i class="text-danger glyphicon glyphicon-heart" title="Made with &hearts; by Michael Clayton in Raleigh"></i>
            <hr />
        </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.0/js/bootstrap.min.js" type="application/javascript" charset="utf-8"></script>
</body>
</html>
