<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Opcode patterns 70% finished</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <!--[if gte IE 9]
    <style type="text/css">
        .gradient {
            filter: none;
        }
    </style>
    <![endif]-->

            <link href="http://mwcz.org/theme/css/styles.min.css?855408e0" rel="stylesheet">

    <!-- JavaScript plugins (requires jQuery) -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

        <link href="http://mwcz.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="mwcz.org ATOM Feed"/>
        <link href="http://mwcz.org/feeds/rss.xml" type="application/atom+xml" rel="alternate"
              title="mwcz.org RSS Feed"/>


</head>
<body>
<div class="container">
    <nav class="clayto-navbar navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://mwcz.org" class="navbar-brand">mwcz.org</a>
        </div>
        <div class="collapse navbar-collapse navbar-responsive-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="http://mwcz.org/posts/">Posts</a>
                        </li>
                        <li><a href="http://mwcz.org/projects/">
                            Projects
                        </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://mwcz.org/archives/"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </nav>
</div>
<!-- /.navbar -->
<main role="main" class="container">
    <article>
        <header class="page-header">
            <h2>
                Opcode patterns 70% finished
            </h2>
        </header>
        <div class="entry-content">
            <p>genlut.py is really filling out.  It generates the LUT for all 68k opcodes (68000 only), and I'm about 70% done.  77 down, 34 to go.</p>
<p>The OPCODES dict defines the first two bytes of each opcode, both static bits and operands.  The operand strings act as keys into the PATTERNS struct, which contains all possible values for each operand.</p>
<p>The recursive function gen() is fed an opcode pattern which may contain operand strings as well as static bits.  Some operand patterns contain other operand patterns, so gen() keeps recursing until all operand patterns are gone.  Once a set of totally static bits has been created, those bits are added to INSTRUCTIONS, along with the name of the opcode.</p>
<p>The PATTERNS, OPCODES, and INSTRUCTIONS dicts are all named poorly, and the whole solution  isn't ultra-elegant, but it does follow the structure of the 68k PRM pretty intuitively and is easy to edit.  Once it's complete, I should never need to run it again.</p>
<p>(This post was copied from my old <a href="http://aejs.blogspot.com/">AEJS blog</a>)</p>
        </div>

        <!-- /.entry-content -->
<footer class="clayto-post-info alert">
    <span class="published">
        Published on 2011-10-13 and filed under 
    </span>



	<a href="http://mwcz.org/tag/aejs/">aejs</a>
        /
	<a href="http://mwcz.org/tag/html5/">html5</a>
        /
	<a href="http://mwcz.org/tag/javascript/">javascript</a>
        /
	<a href="http://mwcz.org/tag/amiga/">amiga</a>
</footer><!-- /.post-info -->    </article>
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'mwcz'; // required: replace example with your forum shortname
            var disqus_identifier = 'opcode-patterns-70-finished';
            var disqus_url = 'http://mwcz.org/2011/10/13/opcode-patterns-70-finished/';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>

</main>


<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://mwcz.org/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://mwcz.org/theme/js/respond.min.js"></script>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'mwcz'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
</body>
</html>